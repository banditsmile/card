<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<link rel="stylesheet" type="text/css" href="{$vd['sc']}css/main.css"/>
<style type="text/css">
td{white-space:normal;overflow:auto;text-overflow:none;}
td p{display:none}
td P.show {
  display: block
}
td strong {
cursor:pointer;
color:#0197c9;
padding:0 3px;
}
</style>
</head>
<body>
<div id="titleDiv">
<div style="float:left"><a href="index.php?a=home"><img src="{$vd['sc']}images/home.png" style="vertical-align:middle" border="0"/></a></div><div style="float:left;padding-top:8px;padding-left:3px;"><a href="index.php?a=home" title="�ص���̨��ҳ"><font color="#000">����</font></a> <span style="font-size:7px;">>></span> <span style="font-size:12px;">һ��ͨ��������</span></div>
<div style="float:right;"><a href="index.php" onFocus="this.blur()" title="�鿴һ��ͨ��ذ���"><img src="{$vd['sc']}images/help.gif" style="vertical-align:middle" border="0"/></a></div>
</div>
<form id="cform" name="cform" method="post" action="index.php?m=mod_b2b&c=ykt&a=save" onsubmit="return checkform()">
<div id="contentTip" style="display:none;"></div>
<div id="content" class="cwarpper">
<div class="cbodyHead"></div>
<div class="cwarpper1">
<div class="ctitle">һ��ͨ����</div>
<table border="1" id="ctable1" class="ctable"  bordercolor="#ededed">
  <tr>
    <td class="tablelt">һ��ͨ����</td>
    <td class="tablert">
      <span<!--if(!UB_YKT){--> style="display:none"<!--}-->><input type="radio" value="100" name="ptype" id="ptype1" class="checkbox"<!--if(UB_YKT){-->onclick="setbindpid(1)" checked<!--}--> />һ��ͨ�һ�ר�ÿ�</span>
      <span<!--if(UB_YKT&&UB_B2C+UB_B2B==0){--> style="display:none"<!--}-->><input type="radio" value="101" name="ptype" class="checkbox" <!--if(UB_YKT){-->onclick="setbindpid(0)" <!--}--><!--if(!UB_YKT){--> checked<!--}--> />һ��ͨ��ֵר�ÿ�</span>
    </td>
  </tr>
  <tr>
    <td class="tablelt">һ��ͨ��ֵ</td>
    <td class="tablert">
      <div id="yktprice">
        <input type="text" name="yktprice" id="yktprice1" class="myinput"/> {$vd['lang']['moneyunit']}
      </div>
    </td>
  </tr>
  <tr>
    <td class="tablelt">��������</td>
    <td class="tablert"><input type="text" name="yktqty" class="myinput" value="100"/> �ſ�</td>
  </tr>
  <tr>
    <td class="tablelt">
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>���ų��Ȳ�����ǰ׺�ĳ��ȣ������ͬһ��ʱ������ɵĿ�������������ѡ��һ��Ŀ���</p>
      ����ǰ׺
    </td>
    <td class="tablert"><input type="text" name="prefix" class="myinput" value=""/></td>
  </tr>
  <tr>
    <td class="tablelt">
      ���ų���
    </td>
    <td class="tablert">
      <select name="cardlength">
        <option value="10">10λ</option>
        <option value="12">12λ</option>
        <option value="14">14λ</option>
        <option value="15">15λ</option>
        <option value="16">16λ</option>
        <option value="18">18λ</option>
        <option value="20">20λ</option>
      </select><strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>������ǰ׺�ĳ��ȣ������ͬһ��ʱ������ɵĿ�������������ѡ��һ��Ŀ���</p>
    </td>
  </tr>
  <tr>
    <td class="tablelt">���볤��</td>
    <td class="tablert">
      <select name="pwdlength">
        <option value="6">6λ</option>
        <option value="8">8λ</option>
        <option value="10">10λ</option>
        <option value="12">12λ</option>
        <option value="14">14λ</option>
        <option value="15">15λ</option>
        <option value="16">16λ</option>
        <option value="18">18λ</option>
        <option value="20">20λ</option>
      </select>
    </td>
  </tr>
  <tr>
    <td class="tablelt">������Ϸ�ʽ</td>
    <td class="tablert">
      <select name="pwdtype">
        <option value="0">������</option>
        <option value="1">����ĸ</option>
        <option value="2">����+��ĸ</option>
      </select>
    </td>
  </tr>
  <tr>
    <td class="tablelt">�Ƿ�д���</td>
    <td class="tablert">
      <select name="iswrite" onchange="setproduct(this)">
        <option value="0">�����ļ����������ݿ�</option>
        <option value="1" selected >�����ļ����ҵ������ݿ�</option>
        <option value="2">�����ļ����ҵ��뵽������Ʒ</option>
        <option value="3">�������ļ�ֱ�ӵ������ݿ�</option>
      </select>
    </td>
  </tr>
  <tr id="tr1" style="display:none">
    <td class="tablelt">
      ���뵽��Ʒ
    </td>
    <td class="tablert">
      <select id="topid" style="width:250px;" name="topid">
        <option value="0">��ѡ��Ŀ����Ʒ</option>
        {#Option($vd['yktitems'], 0, 'pname', 'pid')}
      </select> 
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>�����ϣ��������ɵ�һ��ͨ���뵽�����Ʒ�Ŀ����ߣ�ѡ�񼴿ɣ�����ֻ�о�һ��ͨ���͵�������Ʒ(ƽ̨��)</p>
    </td>
  </tr>
  <tr id="trbindpid" <!--if(!UB_YKT){--> style="display:none"<!--}-->>
    <td class="tablelt">
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>�����ϣ��������ɵ�һ��ֻͨ�ܳ�ֵ����Ʒ��������ѡ��󶨣�����ֻ�оٶ�һ��ͨƽ̨���Ź���Ĳ�Ʒ</p>
      ����Ʒ
    </td>
    <td class="tablert">
      <select id="bindpid" style="width:250px;" name="bindpid" onchange="setyktnikename(this)">
        <option value="0">������Ʒ</option>
        {#Option($vd['items'], 0, 'pname', 'pid')}
      </select> 
      <input type="text" id="pnamekey" name="pnamekey" size="10" value="" style="height:15px"/><span style="padding-left:5px;"></span><input type="button" value="����" onclick="DispSelectZone()" class="button" style="height:20px"/>
    </td>
  </tr>
  <tr>
    <td class="tablelt">��ز���</td>
    <td class="tablert">
      <input type="radio" value="1" name="selladdr" id="selladdr1" class="checkbox" onclick="setaddr(this)"/> ����ƽ̨���� <input type="radio" value="0" name="selladdr" class="checkbox" id="selladdr2"   checked  onclick="setaddr(this)"/> �����ط����� 
    </td>
  </tr>
  <tr id="tr_0_0" <!--if(!UB_YKT){--> style="display:none"<!--}-->>
    <td class="tablelt">
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>�������һ��ͨ�ǰ��շ���ֵ�۸����۳�ȥ������һ��ͨ������ǰ̨��Ч��ʱ��ϵͳ����������۸���пۿ�������дһ�����ۼۣ�����ϵͳ����ͳ�ơ����յĻ��������ֵ</p>
      ���ۼ�
    </td>
    <td class="tablert"><input type="text" name="cprice" id="cprice" class="myinput" value="" style="width:100px"/></td>
  </tr>
  <tr id="tr_1_0" style="display:none">
    <td class="tablelt">
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>���粻ָ��������ϵͳ�������ɺ�Ĭ������һ�� "xxxר�ÿ�" ֮������ơ������ϣ��������ƽ̨���Ŀͻ����Թ������һ��ͨ���ܣ�����ָ��һ�±����������Ǹ�һ��ͨ�ǳ�ֵ"QQ����"�ģ�����������"QQ����ƽ̨��"</p>
      һ��ͨ����
    </td>
    <td class="tablert">
      <input type="text" name="yktnickname" class="myinput" id="yktnickname" style="width:400px"/>
    </td>
  </tr>
  <tr id="tr_1_2" style="display:none">
    <td class="tablelt">
      <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>������һ��ͨ�Ľ����ۣ�������д���󶨵���Ʒ�Ľ����ۣ����յĻ������һ��ͨ����ֵ����������۽��Ǿ����̹������һ��ͨ�ļ۸�����</p>
      ������
    </td>
    <td class="tablert">
      <input type="text" name="price" class="myinput" id="price" style="width:100px"/>
    </td>
  </tr>
  <tr id="tr_1_1" style="display:none">
    <td class="tablelt">�������</td>
    <td class="tablert">
      <input type="radio" value="1" name="tcatid" class="checkbox" onclick="setcat(this)" checked/> �����Ʒͬ��Ŀ <input type="radio" value="0" name="tcatid" class="checkbox" onclick="setcat(this)"/> �Զ�����Ŀ 
    </td>
  </tr>
  <tr id="tr_1_1_0" style="display:none">
    <td class="tablelt">һ������</td>
    <td class="tablert">
      <select name="ubzdid1" size="1" onChange="changelocation(this.options[this.selectedIndex].value)" class="wenbenkuang">
        <option select="selected" value="0">��ѡ��һ������</option>
        {#Option($vd['cat'], $vd['parentid'], 'name', 'id')}
      </select>
      <font color="#FF0000">*</font>
    </td>
  </tr>
  <tr id="tr_1_1_1" style="display:none">
    <td class="tablelt">��������</td>
    <td class="tablert">
      <select name="catid" class="wenbenkuang">
            {#Option($vd['subcat'], 0, 'name', 'id')}
      </select>
      <font color="#FF0000">*</font>
    </td>
  </tr>
  <tr id="trbindaid" <!--if(!UB_YKT){--> style="display:none"<!--}-->>
    <td class="tablelt">
    	<strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>�����̿�������Ч��ʱ��ſۿ�, �����˹���ʹ�����һ��ͨ���󶨵Ĵ����̿��Բ�ѯ��Ӧ�ĳ�ֵ��¼���߻�õ���Ӧ�ķ���,��������˴����̲����Ǵ�����ǰ̨����, ��ôֻ��ͨ��ǰ̨��Ч</p>
    	�󶨴����̱��
    </td>
    <td class="tablert">
      <input type="text" name="bindaid" id="bindaid" class="myinput" value="" style="width:100px" style="font-weight:normal;background:#EAEAEA;" disabled /> <input type="checkbox" id="ckcardok" name="ckcardok" value="1" onclick="setcardok(this)" style="vertical-align:middle;" class="checkbox" onFocus="this.blur()"/> 
    </td>
  </tr>
  <tr id="tr_okbyaid"  style="display:none">
    <td class="tablelt">���¸���</td>
    <td class="tablert">
      <input type="checkbox" value="1" name="okbyaid" class="checkbox" id="okbyaid"/> <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>
      ���򹴱�ʾ, ���࿨��ֻ����һ��ͨ����ͨ��ǰ̨��Ч<br/>
      </p>
    </td>
  </tr>
  <tr>
    <td class="tablelt">������Ч</td>
    <td class="tablert">
      <input type="checkbox" value="1" name="cardok" class="checkbox"  checked id="cardok"/> <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>
      һ��ͨ��Ч��<br/>
      <!--if(UB_YKT){-->һ��ͨƽ̨�û��ſ���������ֵ���߶һ��㿨����<br/><!--}-->
      <!--if(UB_B2B){-->����ƽ̨�û��ſ�������������ֵ���ߴ�ϵͳ�й����Ӧ��ƽ̨��<br/><!--}-->
      <!--if(UB_B2C){-->����ƽ̨�û��ſ�������������ֵ<br/><!--}-->
      </p>
    </td>
  </tr>
  <tr style="display:none">
    <td class="tablelt"><strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>
    	����"һ��ͨ�һ�ר�ÿ�"��Ч������"һ��ͨ��ֵר�ÿ�"ʹ�ú󶼲�����ʹ�ã��������������
    </p>ʹ�ú����
    </td>
    <td class="tablert">
      <input type="radio" value="0" name="allvalid" class="checkbox" checked/> ������ʹ��<strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>�������0����״̬�����Ч�����ɼ���ʹ��</p> <input type="radio" value="0" name="allvalid" class="checkbox" /> ����ʹ�� <strong onmouseover="showhide(this);" onmouseout="showhide(this);">[?]</strong><p>״̬Ϊ����Ч��������������Ѻ�ʣ�µ������Լ���ʹ��</p>
    </td>
  </tr>
  <tr>
    <td class="tablelt">����˵��</td>
    <td class="tablert">
      <!--if(UB_YKT){--> �������Ʒ��ֻ��ͬʱд�����ݿ�Ż���Ч,������˴�����, ���鲻Ҫ��ѡ��Ч<!--}else{-->��ֵר�ÿ�ֻ������ǰ̨�û�����ֵ<!--}-->
    </td>
  </tr>
  <tr>
    <td class="tablelt">��̨��ֵ����</td>
    <td class="tablert"><input type="password" id="mytradepwd" name="mytradepwd" value="" style="width:100px"/></td>
  </tr>
  <tr>
    <td class="tablelt"></td>
    <td class="tablert" style="height:80px">
      <input type="submit" value="ȷ������ &gt;&gt;" class="bigbtn"/>
      <input type="reset" value="�� �� &gt;&gt;" class="bigbtn"/>
    </td>
  </tr>
</table>
<input type="hidden" value="{$item['cid']}" name="ubzcid" id="ubzcid"/>
</div>
<div class="cbodyFoot"></div>
</div>
<div id="opcontent" style="display:none">
  <div class="optxt">
    
  </div>
</div>
</form>
<script type="text/javascript">
  var ctablenum = 2;
</script>
<script src="{$vd['sc']}js/content.js" type="text/javascript"></script>
<script type="text/javascript">
  function set(id)
  {
    //��ȡ�۸�
    var selecthtml = "<select name='yktprice'>" + 
                      "<option value='1'>{$vd['lang']['moneysymbol']}1.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='5'>{$vd['lang']['moneysymbol']}5.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='10'>{$vd['lang']['moneysymbol']}10.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='15'>{$vd['lang']['moneysymbol']}15.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='30'>{$vd['lang']['moneysymbol']}30.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='35'>{$vd['lang']['moneysymbol']}35.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='45'>{$vd['lang']['moneysymbol']}45.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='50'>{$vd['lang']['moneysymbol']}50.00{$vd['lang']['moneyunit']}</option>" + 
                      "<option value='100'>{$vd['lang']['moneysymbol']}100.00{$vd['lang']['moneyunit']}</option>" + 
                    "</select>";
    var inputhtml = "<input type='text' name='yktprice' id='yktprice1' class='myinput'/>"
    
    $("yktprice").innerHTML = id ? selecthtml : inputhtml;
  }
  setTableInput();
  
  function setCustom(obj)
  {
    val = obj.options[obj.selectedIndex].value;
    
    if(val == "0")
    {
      $("customprice")
    }
  }
  
  function setproduct(obj)
  {
    val = obj.options[obj.selectedIndex].value;
    
    $("tr1").style.display = val == "2" ? "" : "none";
  }
  
  function setaddr(obj)
  {
    val = obj.value;
    
    if(val == 1)
    {
      for(i = 0; i < 3; i++)
      {
        $("tr_1_" + i).style.display = "";
      }
      
      for(i = 0; i < 1; i++)
      {
        $("tr_0_" + i).style.display = "none";
      }
      
      setyktnikename($("bindpid"));
    }
    else
    {
      for(i = 0; i < 3; i++)
      {
        $("tr_1_" + i).style.display = "none";
      }
      
      for(i = 0; i < 1; i++)
      {
        $("tr_0_" + i).style.display = "";
      }
      
      $("yktnickname").value = "";
    }
  }
  
  function setcat(obj)
  {
    val = obj.value;
    if(val == 0)
    {
      for(i = 0; i < 2; i++)
      {
        $("tr_1_1_" + i).style.display = "";
      }
    }
    else
    {
      for(i = 0; i < 2; i++)
      {
        $("tr_1_1_" + i).style.display = "none";
      }
    }
  }
  
  var oneCount = 0;
  var subCat = new Array();
  var nodes;
  <!--$i = 0;-->
  <!--foreach($vd['category'] as $cat) {-->
    subCat[{$i}] = new Array("{$cat['name']}","{$cat['id']}","{$cat['parentid']}");
  <!--$i++;}-->
  oneCount = {$i};
  
  function changelocation(locationid)
  {
    var i;
    var locationid;
    
    locationid=locationid;
    document.cform.catid.length = 0;
    
    for (i=0;i < oneCount; i++)
    {
      if (subCat[i][2] == locationid)
      {
        document.cform.catid.options[document.cform.catid.length] = new Option(subCat[i][0], subCat[i][1]);
      }        
    }
    
    if(document.cform.catid.length == 0)
    {
      document.cform.catid.options[document.cform.catid.length] = new Option("��ѡ���������", "0");
    }
  }
  
  function setyktnikename(obj)
  {
  	if($("selladdr1").checked)
  	{
      txt = obj.options[obj.selectedIndex].text;
      if(txt == "������Ʒ")
      {
      	vyktprice = "";
      	if($("yktprice1") && $("yktprice1").value != "")
      	{
      		vyktprice = $("yktprice1").value + "{$vd['lang']['moneyunit']}";
      	}
      	
      	if($("ptype1") && $("ptype1").checked)
      	{
      		txt = "ƽ̨��" + vyktprice;
      	}
        else
      	{
      		txt =  "ƽ̨" + vyktprice + "�ӿ"
      	}
      	
      	$("yktnickname").value = txt;
      }
      else
    	{
        $("yktnickname").value = txt + "ƽ̨��";
      }
    }
    else
  	{
  		$("yktnickname").value = "";
  	}
  }
  
  function setcardok(obj)
  {
  	alert("һ��ͨ�һ�ר�ÿ���Ч,��������˴�����,����û�й�ѡ���¸���Ļ�,ϵͳֻ���������ͨ��ǰ̨��Ч\n\n��̨ -������ -��ϵͳ�������� -��ǰ̨������� -��һ��ͨ������� -����ʾ����һ��ͨ���� ��\n\n���Կ����Ƿ��������������Ч��ʱ����ʾһ��ͨ����");
  	state   = obj.checked ? false : true;
    bck     = obj.checked ? "#ffffff" : "#EAEAEA";
    
    $("bindaid").disabled = state;

    $("tr_okbyaid").style.display = obj.checked ? "" : "none";
    
    $("okbyaid").checked = state;
    
    $("bindaid").readOnly   = state;
    
    $("bindaid").style.background = bck;
    
    $("bindaid").value = "";
    
    $("cardok").checked = state;
    $("cardok").disabled = obj.checked ? true : false;
  	if(obj.checked)
  	{
  		$("cardok").checked = false
  	}

  }
  
  function checkform()
  {
  	if( $("ckcardok").checked && $("bindaid").value == "")
  	{
  		alert("����,����ѡ�˰󶨴�����,����������̵ı��");
  		return false;
  	}
    else
  	{
  		return true;
  	}
  }
  
  var pArray = new Array();
  
  pidLength = $("bindpid").length;
  
  for(i = 0; i < pidLength; i++)
  {
    pArray[i] = new Array($("bindpid").options[i].value, $("bindpid").options[i].text);
  }
  
  function DispSelectZone()
  {
    $("bindpid").length = 0;
    var keys = trim($("pnamekey").value);
    
    for(i = 0; i < pidLength; i++)
    {
      if(pArray[i][1].toLowerCase().indexOf(keys)>-1)
      {
        $("bindpid").options[$("bindpid").length] = new Option(pArray[i][1], pArray[i][0]);
      }
    }
    if($("bindpid").length > 0)
    {
      setyktnikename($("bindpid"));
    }
    else
  	{
  		$("bindpid").options[0] = new Option("������Ʒ(û���ѵ���Ʒ)", "0");
  		$("yktnickname").value = "ͨ��ƽ̨��";
  	}
  }
  
  //------------- 
  //ȥ���ִ���ߵĿո� 
  function lTrim(str) 
  { 
    if (str.charAt(0) == " ") 
    { 
      //����ִ���ߵ�һ���ַ�Ϊ�ո� 
      str = str.slice(1);//���ո���ִ���ȥ�� 
      //��һ��Ҳ�ɸĳ� str = str.substring(1, str.length); 
      str = lTrim(str); //�ݹ���� 
    } 
    return str; 
  } 
  
  //ȥ���ִ��ұߵĿո� 
  function rTrim(str) 
  { 
    var iLength; 
    
    iLength = str.length; 
    if (str.charAt(iLength - 1) == " ") 
    { 
      //����ִ��ұߵ�һ���ַ�Ϊ�ո� 
      str = str.slice(0, iLength - 1);//���ո���ִ���ȥ�� 
      //��һ��Ҳ�ɸĳ� str = str.substring(0, iLength - 1); 
      str = rTrim(str); //�ݹ���� 
    } 
    return str; 
  } 
  
  //ȥ���ִ����ߵĿո� 
  function trim(str) 
  { 
    return lTrim(rTrim(str)); 
  } 
  
  function setbindpid(vf)
  {
  	$("trbindpid").style.display = vf == 1 ? "" : "none";
  	$("trbindaid").style.display = vf == 1 ? "" : "none";
  }
</script>
</body>
</html>
